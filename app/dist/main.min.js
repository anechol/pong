function init(){animate(draw)}function clear(){c.clearRect(0,0,canvas.width,canvas.height),canvas.style.backgroundColor="black",c.save(),c.strokeStyle="white",c.setLineDash([10,5]),c.beginPath(),c.moveTo(349,0),c.lineTo(349,401),c.stroke(),c.save()}function opponentMove(){var l=-(opponent.y+opponent.height/2-ball.y);l<0&&l<-4?l=-5:l>0&&l>4&&(l=5),opponent.y+=l}function score(){ball.x>canvas.width&&playerScore++,ball.x<0&&opponentScore++,c.font="36px sans-serif",c.fillStyle="white",c.fillText(playerScore,165,30),c.font="36px sans-serif",c.fillStyle="white",c.fillText(opponentScore,520,30)}function startGame(){window.onload=function(){startPage.style.display="block",canvas.style.display="none",gameOver.style.display="none"},startPage.onclick=function(){startPage.style.display="none",canvas.style.display="block",gameOver.style.display="none"},"block"==canvas.style.display&&(clear(),player.draw(),opponent.draw(),opponentMove(),score(),ball.draw())}function reset(){(ball.x>canvas.width||ball.x<0)&&(ball.x=canvas.width/2,ball.y=canvas.height/2,ball.vx=5,ball.vy=5),5!=playerScore&&5!=opponentScore||(ball.x=canvas.width/2,ball.y=canvas.height/2,startPage.style.display="none",canvas.style.display="none",gameOver.style.display="block","block"==gameOver.style.display&&(gameOver.onclick=function(){startPage.style.display="block",canvas.style.display="none",gameOver.style.display="none",playerScore=0,opponentScore=0,ball.x=canvas.width/2,ball.y=canvas.height/2,ball.vx=5,ball.vy=5}))}function draw(){startGame(),reset(),ball.x+=ball.vx,ball.y+=ball.vy,(ball.y>canvas.height||ball.y<0)&&(ball.vy=-ball.vy),(ball.x>canvas.width||ball.x<0)&&(ball.vx=-ball.vx),ball.x+ball.vx<player.x+player.width&&ball.x+ball.width>player.x&&ball.y+ball.vy<player.y+player.height&&ball.y+ball.height>player.y&&(ball.vx=-ball.vx-randomNum(2,4),ball.vy=-ball.vy-randomNum(2,4),ball.x+ball.vx>7&&ball.x+ball.vx==5),ball.x+ball.vx<opponent.x+opponent.width&&ball.x+ball.width>opponent.x&&ball.y+ball.vy<opponent.y+opponent.height&&ball.y+ball.height>opponent.y&&(ball.vx=-ball.vx-randomNum(2,4),ball.vy=-ball.vy-randomNum(2,4),ball.x+ball.vx>7&&ball.x+ball.vx==5),animate(draw)}var canvas=document.getElementById("pong"),c=canvas.getContext("2d"),startPage=document.getElementById("startPage"),gameOver=document.getElementById("gameOver"),randomNum=function(l,a){return Math.random()*(a-l)+l},playerScore=0,opponentScore=0,animate=function(){return window.requestAnimationFrame||function(l){return window.setTimeout(l,1e3/60)}}(),player={x:40,y:mouse,width:20,height:60,color:"white",draw:function(){c.fillStyle=this.color,c.fillRect(this.x,this.y,this.width,this.height)}},mouse=canvas.addEventListener("mousemove",function(l){player.y=l.offsetY}),opponent={x:640,y:120,width:20,height:60,color:"white",draw:function(){c.fillStyle=this.color,c.fillRect(this.x,this.y,this.width,this.height)}},ball={x:canvas.width/2,y:canvas.height/2,vx:5,vy:5,width:8,height:8,color:"white",draw:function(){c.fillStyle=this.color,c.fillRect(this.x,this.y,this.width,this.height)}};init();